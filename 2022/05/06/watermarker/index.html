<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="alternative" href="/atom.xml" title="花花" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>给图片加水印的程序|python - 花花</title>
<link rel="stylesheet" href="/css/main.css">
<!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><meta name="generator" content="Hexo 5.4.2"></head><body><header class="head"><h1 class="head-title u-fl"><a href="/">花花</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a href="/" class="head-nav__link">Home</a></li><li class="head-nav__item"><a href="/archives" class="head-nav__link">Archives</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"><time datetime="2022-05-05T18:56:11.000Z" class="post__time">五月 6, 2022</time><h1 class="post__title"><a href="/2022/05/06/watermarker/">给图片加水印的程序|python</a></h1></header><div class="post__main echo"><p>问题来源：在闲鱼卖东西的时候为了防盗要给照片加水印、实习时身份证照片要打水印......找不到简单好用的手机app
1. <code>pip install opencv-python==3.4.9.31</code><br />
&gt; 如果不带上版本号，可能会遇到长时间停留在 building wheel for
opencv-python的情况，带上版本号并且是旧版本号可以很快安装好 2.
测试是否成功安装opencv-python<br />
运行以下程序，若正确输出版本号则成功安装opencv-python <span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import cv2</span><br><span class="line">print(cv2.__version__)</span><br></pre></td></tr></table></figure> 3. <code>pipe3 install Pillow==4.0.0</code><br />
&gt; 跟上版本号很重要，不然会出错，原因是我的mac
OS没有升级到最新版本。一开始一直出错，最终找到这个解决方法，<a
target="_blank" rel="noopener" href="https://blog.51cto.com/u_13567403/3051637">答案来源</a> 4.
<code>cd /Users/flower/PycharmProjects</code><br />
<code>git clone https://github.com/2Dou/watermarker.git</code><br />
watermarker文件夹中font文件夹下的青鸟华光琥珀改为bird，同时marker.py中的青鸟华光琥珀也都改为bird，改成什么名字不重要，只要都改成一样的并且都是英文就行<br />
5. 把要添加水印的照片放到watermark下的input文件夹内<br />
<code>cd /Users/flower/PycharmProjects/watermark</code><br />
<code>python marker.py -f ./input/a.jpg -m yingcuiwen花花</code><br />
在watermark下的output文件夹内查看添加好水印的图片<br />
6. 批量处理<br />
运行<code>python marker.py -f ./input -m yingcuiwen花花</code><br />
&gt; 一开始出错:cannot identify image file ‘pikachu/.DS_Store’，参考 <a
target="_blank" rel="noopener" href="https://its304.com/article/weixin_38411989/109311229">此篇博文</a><br />
<code>cd watermarker</code><br />
<code>find ./ -name ".DS_Store"</code><br />
<code>find ./ -name ".DS_Store" -delete</code></p>
<h3 id="在此过程中学会的其他知识">在此过程中学会的其他知识:</h3>
<h4 id="安装opencv">安装OpenCV</h4>
<ol type="1">
<li><a target="_blank" rel="noopener" href="https://opencv.org/releases/">下载OpenCV</a><br />
</li>
<li>安装cmake：<a
target="_blank" rel="noopener" href="https://blog.csdn.net/fanyun_01/article/details/114237851">教程</a><br />
</li>
<li><code>cd opencv-4.5</code><br />
<code>mkdir build</code><br />
<code>cd build</code> <code>cmake -G "Unix Makefiles" ..</code><br />
<code>make</code><br />
<code>sudo make install</code></li>
</ol>
</div><footer class="post__foot u-cf"><a href="/2022/05/06/watermarker/#disqus_thread" class="post__foot-link u-fr">0 COMMENTS</a></footer></article></main><footer class="foot"><div class="foot-copy u-fl">&copy; 2022 Phryne Ying</div><menu class="page-menu u-fr"><li class="page-menu__item"><a title="Previous" href="/2022/05/09/SSL/" class="page-menu__link icon-arrow-left"></a></li><li class="page-menu__item"><a title="Next" href="/2022/05/05/ssm/" class="page-menu__link icon-arrow-right"></a></li></menu></footer></body></html>